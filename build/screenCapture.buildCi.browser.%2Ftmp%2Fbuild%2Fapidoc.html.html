<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/danielgtaylor/aglio#readme">aglio (v2.3.0)</a>
</h1>
<h4>An API Blueprint renderer with theme support</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.aglio">module aglio</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.collectPathsSync">
            function <span class="apidocSignatureSpan">aglio.</span>collectPathsSync
            <span class="apidocSignatureSpan">(input, includePath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.compileFile">
            function <span class="apidocSignatureSpan">aglio.</span>compileFile
            <span class="apidocSignatureSpan">(inputFile, outputFile, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.getTheme">
            function <span class="apidocSignatureSpan">aglio.</span>getTheme
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.render">
            function <span class="apidocSignatureSpan">aglio.</span>render
            <span class="apidocSignatureSpan">(input, options, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.renderFile">
            function <span class="apidocSignatureSpan">aglio.</span>renderFile
            <span class="apidocSignatureSpan">(inputFile, outputFile, options, done)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">aglio.</span>bin</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.aglio.bin">module aglio.bin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.aglio.bin.run">
            function <span class="apidocSignatureSpan">aglio.bin.</span>run
            <span class="apidocSignatureSpan">(argv, done)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.aglio" id="apidoc.module.aglio">module aglio</a></h1>


    <h2>
        <a href="#apidoc.element.aglio.collectPathsSync" id="apidoc.element.aglio.collectPathsSync">
        function <span class="apidocSignatureSpan">aglio.</span>collectPathsSync
        <span class="apidocSignatureSpan">(input, includePath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">collectPathsSync = function (input, includePath) {
  var paths;
  paths = [];
  input.replace(INCLUDE, function(match, spaces, filename) {
    var content, fullPath;
    fullPath = path.join(includePath, filename);
    paths.push(fullPath);
    content = fs.readFileSync(fullPath, 'utf-8');
    return paths = paths.concat(exports.collectPathsSync(content, path.dirname(fullPath)));
  });
  return paths;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The following methods are available from the `aglio` library:

#### aglio.collectPathsSync (blueprint, includePath)
Get a list of paths that are included in the blueprint. This list can be watched for changes to do things like live reload. The
blueprint's own path is not included.

```javascript
var blueprint = '# GET /foo\n&lt;-- include(example.json --&gt;\n';
var watchPaths = aglio.<span class="apidocCodeKeywordSpan">collectPathsSync</span>(blueprint, process.cwd())
```

#### aglio.render (blueprint, options, callback)
Render an API Blueprint string and pass the generated HTML to the callback. The `options` can either be an object of options or
a simple layout name or file path string. Available options are:

| Option      | Type   | Default       | Description                           |
| ----------- | ------ | ------------- | ------------------------------------- |
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.aglio.compileFile" id="apidoc.element.aglio.compileFile">
        function <span class="apidocSignatureSpan">aglio.</span>compileFile
        <span class="apidocSignatureSpan">(inputFile, outputFile, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compileFile = function (inputFile, outputFile, done) {
  var compile;
  compile = function(input) {
    var compiled;
    compiled = includeDirective(path.dirname(inputFile), input);
    if (outputFile !== '-') {
      return fs.writeFile(outputFile, compiled, function(err) {
        return done(err);
      });
    } else {
      console.log(compiled);
      return done(null);
    }
  };
  if (inputFile !== '-') {
    return fs.readFile(inputFile, {
      encoding: 'utf-8'
    }, function(err, input) {
      if (err) {
        return done(errMsg('Error writing output', err));
      }
      return compile(input.toString());
    });
  } else {
    process.stdin.setEncoding('utf-8');
    return process.stdin.on('readable', function() {
      var chunk;
      chunk = process.stdin.read();
      if (chunk != null) {
        return compile(chunk);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return done();
} else {
  if (!argv.i || !argv.o) {
    parser.showHelp();
    return done('Invalid arguments');
  }
  if (argv.c || (typeof argv.o === 'string' &amp;&amp; (argv.o.match(/\.apib$/ || argv.o.match(/\.md$/))))) {
    return aglio.<span class="apidocCodeKeywordSpan">compileFile</span>(argv.i, argv.o, function(err) {
      if (err) {
        logError(err, argv.verbose);
      }
      return done();
    });
  } else {
    return aglio.renderFile(argv.i, argv.o, argv, function(err, warnings) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.aglio.getTheme" id="apidoc.element.aglio.getTheme">
        function <span class="apidocSignatureSpan">aglio.</span>getTheme
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTheme = function (name) {
  if (!name || indexOf.call(LEGACY_TEMPLATES, name) &gt;= 0) {
    name = 'olio';
  }
  return require("aglio-theme-" + name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  argv.themeTemplate = argv.theme;
  argv.theme = 'default';
}
if (argv.verbose) {
  console.log("Loading theme " + argv.theme);
}
try {
  theme = aglio.<span class="apidocCodeKeywordSpan">getTheme</span>(argv.theme);
} catch (_error) {
  err = _error;
  err.message = "Could not load theme: " + err.message;
  logError(err, argv.verbose);
  return done(err);
}
config = theme.getConfig();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.aglio.render" id="apidoc.element.aglio.render">
        function <span class="apidocSignatureSpan">aglio.</span>render
        <span class="apidocSignatureSpan">(input, options, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">render = function (input, options, done) {
  var filteredInput, ref, variables;
  if (typeof options === 'string' || options instanceof String) {
    options = {
      theme: options
    };
  }
  if (options.filterInput == null) {
    options.filterInput = true;
  }
  if (options.includePath == null) {
    options.includePath = process.cwd();
  }
  if (options.theme == null) {
    options.theme = 'default';
  }
  if (options.template) {
    options.theme = options.template;
  }
  if (fs.existsSync(options.theme)) {
    console.log("Setting theme to olio and layout to " + options.theme);
    options.themeLayout = options.theme;
    options.theme = 'olio';
  } else if (options.theme !== 'default' &amp;&amp; (ref = options.theme, indexOf.call(LEGACY_TEMPLATES, ref) &gt;= 0)) {
    variables = options.theme.split('-')[0];
    console.log("Setting theme to olio and variables to " + variables);
    options.themeVariables = variables;
    options.theme = 'olio';
  }
  input = includeDirective(options.includePath, input);
  filteredInput = !options.filterInput ? input : input.replace(/\r\n?/g, '\n').replace(/\t/g, '    ');
  benchmark.start('parse');
  return drafter.parse(filteredInput, {
    type: 'ast'
  }, function(err, res) {
    var f, i, len, name, option, ref1, theme, words;
    benchmark.end('parse');
    if (err) {
      err.input = input;
      return done(errMsg('Error parsing input', err));
    }
    try {
      theme = exports.getTheme(options.theme);
    } catch (_error) {
      err = _error;
      return done(errMsg('Error getting theme', err));
    }
    ref1 = theme.getConfig().options || [];
    for (i = 0, len = ref1.length; i &lt; len; i++) {
      option = ref1[i];
      words = (function() {
        var j, len1, ref2, results;
        ref2 = option.name.split('-');
        results = [];
        for (j = 0, len1 = ref2.length; j &lt; len1; j++) {
          f = ref2[j];
          results.push(f[0].toUpperCase() + f.slice(1));
        }
        return results;
      })();
      name = "theme" + (words.join(''));
      if (options[name] == null) {
        options[name] = option["default"];
      }
    }
    benchmark.start('render-total');
    return theme.render(res.ast, options, function(err, html) {
      benchmark.end('render-total');
      if (err) {
        return done(err);
      }
      res.warnings.input = filteredInput;
      return done(null, html, res.warnings);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// Render a blueprint with a template by name
var blueprint = '# Some API Blueprint string';
var options = {
  themeVariables: 'default'
};

aglio.<span class="apidocCodeKeywordSpan">render</span>(blueprint, options, function (err, html, warnings) {
    if (err) return console.log(err);
    if (warnings) console.log(warnings);

    console.log(html);
});

// Render a blueprint with a custom template file
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.aglio.renderFile" id="apidoc.element.aglio.renderFile">
        function <span class="apidocSignatureSpan">aglio.</span>renderFile
        <span class="apidocSignatureSpan">(inputFile, outputFile, options, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renderFile = function (inputFile, outputFile, options, done) {
  var render;
  render = function(input) {
    return exports.render(input, options, function(err, html, warnings) {
      if (err) {
        return done(err);
      }
      if (outputFile !== '-') {
        return fs.writeFile(outputFile, html, function(err) {
          return done(err, warnings);
        });
      } else {
        console.log(html);
        return done(null, warnings);
      }
    });
  };
  if (inputFile !== '-') {
    if (options.includePath == null) {
      options.includePath = path.dirname(inputFile);
    }
    return fs.readFile(inputFile, {
      encoding: 'utf-8'
    }, function(err, input) {
      if (err) {
        return done(errMsg('Error reading input', err));
      }
      return render(input.toString());
    });
  } else {
    process.stdin.setEncoding('utf-8');
    return process.stdin.on('readable', function() {
      var chunk;
      chunk = process.stdin.read();
      if (chunk != null) {
        return render(chunk);
      }
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
```

#### aglio.renderFile (inputFile, outputFile, options, callback)
Render an API Blueprint file and save the HTML to another file. The input/output file arguments are file paths. The options behaves
 the same as above for `aglio.render`, except that the `options.includePath` defaults to the basename of the input filename.

```javascript
aglio.<span class="apidocCodeKeywordSpan">renderFile</span>('/tmp/input.apib', '/tmp/output.html', options,
function (err, warnings) {
    if (err) return console.log(err);
    if (warnings) console.log(warnings);
});
```

# Development
Pull requests are encouraged! Feel free to fork and hack away, especially on new themes. The build system in use is Grunt, so make
 sure you have it installed:
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.aglio.bin" id="apidoc.module.aglio.bin">module aglio.bin</a></h1>


    <h2>
        <a href="#apidoc.element.aglio.bin.run" id="apidoc.element.aglio.bin.run">
        function <span class="apidocSignatureSpan">aglio.bin.</span>run
        <span class="apidocSignatureSpan">(argv, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">run = function (argv, done) {
  var _html, config, entry, err, getHtml, i, io, len, paths, ref, sendHtml, server, theme, watcher;
  if (argv == null) {
    argv = parser.argv;
  }
  if (done == null) {
    done = function() {};
  }
  _html = null;
  getHtml = function(cb) {
    if (_html) {
      return cb &amp;&amp; cb(null, _html);
    } else {
      return fs.readFile(argv.i, "utf-8", function(err, blueprint) {
        console.log("Rendering " + argv.i);
        return aglio.render(blueprint, argv, function(err, html, warnings) {
          logWarnings(warnings);
          if (err) {
            logError(err, argv.verbose);
            return cb &amp;&amp; cb(err);
          } else {
            _html = html;
            return cb &amp;&amp; cb(null, _html);
          }
        });
      });
    }
  };
  if (argv.version) {
    console.log("aglio " + (require('../package.json').version));
    console.log("olio " + (require('aglio-theme-olio/package.json').version));
    return done();
  }
  if (argv.template) {
    argv.theme = argv.template;
  }
  if (fs.existsSync(argv.theme)) {
    argv.themeTemplate = argv.theme;
    argv.theme = 'default';
  }
  if (argv.verbose) {
    console.log("Loading theme " + argv.theme);
  }
  try {
    theme = aglio.getTheme(argv.theme);
  } catch (_error) {
    err = _error;
    err.message = "Could not load theme: " + err.message;
    logError(err, argv.verbose);
    return done(err);
  }
  config = theme.getConfig();
  ref = config.options;
  for (i = 0, len = ref.length; i &lt; len; i++) {
    entry = ref[i];
    parser.options("theme-" + entry.name, entry);
  }
  if (argv.s) {
    if (!argv.i) {
      parser.showHelp();
      return done('Invalid arguments');
    }
    argv.locals = {
      livePreview: true
    };
    if (argv.i !== '-') {
      argv.includePath = path.dirname(argv.i);
    }
    getHtml();
    server = http.createServer(function(req, res) {
      var serve;
      if (req.url !== '/') {
        serve = serveStatic(path.dirname(argv.i));
        return serve(req, res, function() {
          return res.end();
        });
      }
      return getHtml(function(err, html) {
        res.writeHead(200, {
          "Content-Type": "text/html"
        });
        return res.end((err ? err.toString() : html));
      });
    }).listen(argv.p, argv.h, function() {
      return console.log("Server started on http://" + argv.h + ":" + argv.p + "/");
    });
    sendHtml = function(socket) {
      return getHtml(function(err, html) {
        var re;
        if (!err) {
          console.log("Refresh web page in browser");
          re = /&lt;body.*?&gt;[^]*&lt;\/body&gt;/gi;
          html = html.match(re)[0];
          return socket.emit("refresh", html);
        }
      });
    };
    io = require("socket.io")(server);
    io.on("connection", function(socket) {
      console.log("Socket connected");
      return socket.on('request-refresh', function() {
        return sendHtml(socket);
      });
    });
    paths = aglio.collectPathsSync(fs.readFileSync(argv.i, 'utf-8'), path.dirname(argv.i));
    watcher = chokidar.watch([argv.i].concat(paths));
    watcher.on("change", function(path) {
      console.log("Updated " + path);
      _html = null;
      return sendHtml(io);
    });
    return done();
  } else {
    if (!argv.i || !argv.o) {
      parser.showHelp();
      return done('Invalid arguments');
    }
    if (argv.c || (typeof argv.o === 'string' &amp;&amp; (argv.o.match(/\.apib$/ || argv.o.match(/\.md$/))))) {
      return aglio.compileFile(argv.i, argv.o, function(err) {
        if (err) {
          logError(err, argv.verbose);
        }
        return done();
      });
    } else {
      return aglio.renderFile(argv.i, argv.o, argv, function(err, warnings) {
        var lineNo;
        if (err) {
          lineNo = getLineNo(err.input, err);
          if (lineNo != null) {
            console.error(cErr("&gt;&gt; Line " + lineNo + ":") + (" " + err.message + " (error code " + err.code + ")"));
          } else {
            logError(err, argv.verbose);
          }
          return done(err);
        }
        logWarnings(warning ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...



#!/usr/bin/env node

process.title = 'aglio';

require('../lib/bin').<span class="apidocCodeKeywordSpan">run</span>(null, function(err){
	if(err){
		process.exit(1);
	}
});
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>